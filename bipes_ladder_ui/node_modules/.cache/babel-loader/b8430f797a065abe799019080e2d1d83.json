{"ast":null,"code":"import _slicedToArray from \"/home/andouglas/Documents/BipesLadder/BipesLadderReact/react-dnd-example/react-dnd-example/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/andouglas/Documents/BipesLadder/BipesLadderReact/react-dnd-example/react-dnd-example/src/OutputDropZone.jsx\";\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { useDrop } from \"react-dnd\";\nimport { COMPONENT, ROW, COLUMN } from \"./constants\";\nvar ACCEPTS = [COMPONENT, COLUMN];\n\nvar OutputDropZone = function OutputDropZone(_ref) {\n  var data = _ref.data,\n      onDrop = _ref.onDrop;\n\n  var _useDrop = useDrop({\n    accept: ACCEPTS,\n    drop: function drop(item, monitor) {\n      onDrop(data, item);\n    },\n    canDrop: function canDrop(item, monitor) {\n      var dropZonePath = data.path;\n      var splitDropZonePath = dropZonePath.split(\"-\");\n      var itemPath = item.path; // sidebar items can always be dropped anywhere\n\n      // sidebar items can always be dropped anywhere\n      if (!itemPath) {\n        // if (data.childrenCount >= 3) {\n        //  return false;\n        // }\n        return true;\n      }\n\n      var splitItemPath = itemPath.split(\"-\"); // limit columns when dragging from one row to another row\n\n      // limit columns when dragging from one row to another row\n      var dropZonePathRowIndex = splitDropZonePath[0];\n      var itemPathRowIndex = splitItemPath[0];\n      var diffRow = dropZonePathRowIndex !== itemPathRowIndex;\n\n      if (diffRow && splitDropZonePath.length === 2 && data.childrenCount >= 3) {\n        return false;\n      } // Invalid (Can't drop a parent element (row) into a child (column))\n\n\n      // Invalid (Can't drop a parent element (row) into a child (column))\n      var parentDropInChild = splitItemPath.length < splitDropZonePath.length;\n      if (parentDropInChild) return false; // Current item can't possible move to it's own location\n\n      // Current item can't possible move to it's own location\n      if (itemPath === dropZonePath) return false; // Current area\n\n      // Current area\n      if (splitItemPath.length === splitDropZonePath.length) {\n        var pathToItem = splitItemPath.slice(0, -1).join(\"-\");\n        var currentItemIndex = Number(splitItemPath.slice(-1)[0]);\n        var pathToDropZone = splitDropZonePath.slice(0, -1).join(\"-\");\n        var currentDropZoneIndex = Number(splitDropZonePath.slice(-1)[0]);\n\n        if (pathToItem === pathToDropZone) {\n          var nextDropZoneIndex = currentItemIndex + 1;\n          if (nextDropZoneIndex === currentDropZoneIndex) return false;\n        }\n      }\n\n      return true;\n    },\n    collect: function collect(monitor) {\n      return {\n        isOver: monitor.isOver(),\n        canDrop: monitor.canDrop()\n      };\n    }\n  }),\n      _useDrop2 = _slicedToArray(_useDrop, 2),\n      _useDrop2$ = _useDrop2[0],\n      isOver = _useDrop2$.isOver,\n      canDrop = _useDrop2$.canDrop,\n      drop = _useDrop2[1];\n\n  var isActive = isOver && canDrop;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"outputDropZone\", {\n      active: isActive\n    }),\n    ref: drop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, \"OutputDropZone\");\n};\n\nexport default OutputDropZone;","map":{"version":3,"sources":["/home/andouglas/Documents/BipesLadder/BipesLadderReact/react-dnd-example/react-dnd-example/src/OutputDropZone.jsx"],"names":["React","classNames","useDrop","COMPONENT","ROW","COLUMN","ACCEPTS","OutputDropZone","data","onDrop","accept","drop","item","monitor","canDrop","dropZonePath","path","splitDropZonePath","split","itemPath","splitItemPath","dropZonePathRowIndex","itemPathRowIndex","diffRow","length","childrenCount","parentDropInChild","pathToItem","slice","join","currentItemIndex","Number","pathToDropZone","currentDropZoneIndex","nextDropZoneIndex","collect","isOver","isActive","active"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport classNames from \"classnames\";\nimport { useDrop } from \"react-dnd\";\nimport { COMPONENT, ROW, COLUMN } from \"./constants\";\n\nconst ACCEPTS = [COMPONENT, COLUMN];\n\nconst OutputDropZone = ({ data, onDrop }) => {\n  const [{ isOver, canDrop }, drop] = useDrop({\n    accept: ACCEPTS,\n    drop: (item, monitor) => {\n      onDrop(data, item);\n    },\n    canDrop: (item, monitor) => {\n      const dropZonePath = data.path;\n      const splitDropZonePath = dropZonePath.split(\"-\");\n      const itemPath = item.path;\n\n      // sidebar items can always be dropped anywhere\n      if (!itemPath) {\n        // if (data.childrenCount >= 3) {\n        //  return false;\n        // }\n        return true;\n      }\n\n      const splitItemPath = itemPath.split(\"-\");\n\n      // limit columns when dragging from one row to another row\n      const dropZonePathRowIndex = splitDropZonePath[0];\n      const itemPathRowIndex = splitItemPath[0];\n      const diffRow = dropZonePathRowIndex !== itemPathRowIndex;\n      if (\n        diffRow &&\n        splitDropZonePath.length === 2 &&\n        data.childrenCount >= 3\n      ) {\n        return false;\n      }\n\n      // Invalid (Can't drop a parent element (row) into a child (column))\n      const parentDropInChild = splitItemPath.length < splitDropZonePath.length;\n      if (parentDropInChild) return false;\n\n      // Current item can't possible move to it's own location\n      if (itemPath === dropZonePath) return false;\n\n      // Current area\n      if (splitItemPath.length === splitDropZonePath.length) {\n        const pathToItem = splitItemPath.slice(0, -1).join(\"-\");\n        const currentItemIndex = Number(splitItemPath.slice(-1)[0]);\n\n        const pathToDropZone = splitDropZonePath.slice(0, -1).join(\"-\");\n        const currentDropZoneIndex = Number(splitDropZonePath.slice(-1)[0]);\n\n        if (pathToItem === pathToDropZone) {\n          const nextDropZoneIndex = currentItemIndex + 1;\n          if (nextDropZoneIndex === currentDropZoneIndex) return false;\n        }\n      }\n\n      return true;\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n\n  const isActive = isOver && canDrop;\n  return (\n    <div\n      className={classNames(\"outputDropZone\", { active: isActive })}\n      ref={drop}\n    >\n      OutputDropZone\n    </div>\n  );\n};\nexport default OutputDropZone;\n"]},"metadata":{},"sourceType":"module"}